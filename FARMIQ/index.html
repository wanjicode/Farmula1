<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Farm IQ - AI Driven Pest & Disease Detection with Yield Prediction</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics.js";
    import { getDatabase, ref, push, set, get } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";
    import { getStorage, ref as storageRef, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCSv-qp0XaFPeN3zpOyuKHAiILDIlCQ0Dc",
      authDomain: "school-281ff.firebaseapp.com",
      databaseURL: "https://school-281ff-default-rtdb.firebaseio.com",
      projectId: "school-281ff",
      storageBucket: "school-281ff.firebasestorage.app",
      messagingSenderId: "623145317447",
      appId: "1:623145317447:web:edefdbb896625317196d62",
      measurementId: "G-JBJV9K0890"
    };

    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const database = getDatabase(app);
    const storage = getStorage(app);

    window.firebaseApp = app;
    window.firebaseDatabase = database;
    window.firebaseStorage = storage;
    window.ref = ref;
    window.push = push;
    window.set = set;
    window.get = get;
    window.storageRef = storageRef;
    window.uploadBytes = uploadBytes;
    window.getDownloadURL = getDownloadURL;
  </script>

  <style>
    :root {
      --dark-green: #2E7D32;
      --light-green: #66BB6A;
      --orange: #F57C00;
      --white: #FFFFFF;
      --gray: #F5F5F5;
      --dark-gray: #424242;
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Inter', sans-serif;
      line-height: 1.6;
      color: #333;
      overflow-x: hidden;
    }

    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }
    .developers {
  margin-top: 4rem;
  text-align: center;
}

.developers h3 {
  font-size: 2rem;
  margin-bottom: 3rem;
  color: #1a1a1a;
  font-weight: 700;
}

.developer-grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 2.5rem;
}

.developer-tile {
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  width: 300px;
  transition: all 0.4s ease;
  text-align: center;
}

.developer-tile:hover {
  transform: translateY(-10px);
  box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
}

.developer-photo {
  background: linear-gradient(135deg, #4CAF50, #2e7d32);
  padding: 1.5rem 0;
}

.developer-photo img {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  border: 4px solid #fff;
  object-fit: cover;
  box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}

.developer-info {
  padding: 1.5rem 1rem;
}

.developer-info h4 {
  margin: 0.5rem 0 0.2rem;
  font-size: 1.3rem;
  color: #333;
}

.developer-info .role {
  color: #4CAF50;
  font-weight: 600;
  margin-bottom: 0.8rem;
}

.developer-info .bio {
  color: #555;
  font-size: 0.95rem;
  line-height: 1.5;
}

    header {
      background-color: var(--white);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
    }

    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      height: 70px;
    }

    .logo {
      display: flex;
      align-items: center;
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--dark-green);
    }

    .logo span {
      margin-left: 0.5rem;
    }

    .nav-links {
      display: none;
    }

    .nav-links a {
      margin-left: 1.5rem;
      color: var(--dark-gray);
      text-decoration: none;
      font-weight: 500;
      transition: var(--transition);
    }

    .nav-links a:hover {
      color: var(--dark-green);
    }

    .cta-button {
      background: linear-gradient(135deg, var(--dark-green), var(--orange));
      color: var(--white);
      padding: 0.6rem 1.2rem;
      border-radius: 50px;
      font-weight: 600;
      text-decoration: none;
      transition: var(--transition);
      border: none;
      cursor: pointer;
    }

    .cta-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(46, 125, 50, 0.2);
    }

    .mobile-menu-btn {
      display: block;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--dark-green);
      cursor: pointer;
    }

    .mobile-menu {
      position: fixed;
      top: 70px;
      left: 0;
      width: 100%;
      background-color: var(--white);
      padding: 1rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transform: translateY(-100%);
      opacity: 0;
      z-index: 999;
      transition: var(--transition);
    }

    .mobile-menu.active {
      transform: translateY(0);
      opacity: 1;
    }

    .mobile-menu a {
      display: block;
      padding: 0.8rem 0;
      color: var(--dark-gray);
      text-decoration: none;
      font-weight: 500;
      border-bottom: 1px solid var(--gray);
    }

    .mobile-menu a:last-child {
      border-bottom: none;
    }

    .hero {
      background: linear-gradient(rgba(46, 125, 50, 0.7), rgba(245, 124, 0, 0.7)),
        url('https://cdn.pixabay.com/photo/2016/11/14/04/36/agriculture-1822654_1280.jpg') center/cover no-repeat;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--white);
      text-align: center;
      margin-top: 70px;
    }

    .hero-content {
      max-width: 800px;
      padding: 0 1rem;
    }

    .hero h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
    }

    .hero p {
      font-size: 1.1rem;
      margin-bottom: 2rem;
      opacity: 0.9;
    }

    .hero-buttons {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
    }

    .upload-btn {
      background-color: var(--dark-green);
      color: var(--white);
      padding: 0.8rem 1.5rem;
      border-radius: 50px;
      font-weight: 600;
      text-decoration: none;
      transition: var(--transition);
      display: flex;
      align-items: center;
      border: none;
      cursor: pointer;
    }

    .upload-btn i,
    .chat-btn i {
      margin-right: 0.5rem;
    }

    .chat-btn {
      background-color: var(--orange);
      color: var(--white);
      padding: 0.8rem 1.5rem;
      border-radius: 50px;
      font-weight: 600;
      text-decoration: none;
      transition: var(--transition);
      display: flex;
      align-items: center;
      border: none;
      cursor: pointer;
    }

    .upload-btn:hover,
    .chat-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .solutions {
      padding: 5rem 0;
      background-color: var(--gray);
    }

    .section-title {
      text-align: center;
      margin-bottom: 3rem;
      color: var(--dark-green);
    }

    .section-title h2 {
      font-size: 2.2rem;
      margin-bottom: 1rem;
    }

    .section-title p {
      max-width: 600px;
      margin: 0 auto;
      color: var(--dark-gray);
    }

    .solution-cards {
      display: grid;
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    .solution-card {
      background-color: var(--white);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      transition: var(--transition);
      border-top: 4px solid;
    }

    .solution-card:nth-child(1) {
      border-top-color: var(--dark-green);
    }

    .solution-card:nth-child(2) {
      border-top-color: var(--orange);
    }

    .solution-card:nth-child(3) {
      border-top-color: var(--light-green);
    }

    .solution-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    }

    .solution-card-content {
      padding: 2rem;
    }

    .solution-icon {
      font-size: 2.5rem;
      margin-bottom: 1.5rem;
      color: var(--dark-green);
    }

    .solution-card h3 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      color: var(--dark-gray);
    }

    .solution-card p {
      color: #666;
    }

    .how-it-works {
      padding: 5rem 0;
      background-color: var(--white);
    }

    .steps {
      margin-top: 3rem;
    }

    .step {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      margin-bottom: 3rem;
    }

    .step:last-child {
      margin-bottom: 0;
    }

    .step-number {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--dark-green), var(--light-green));
      color: var(--white);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
    }

    .step-icon {
      font-size: 2rem;
      color: var(--orange);
      margin-bottom: 1rem;
    }

    .step h3 {
      margin-bottom: 1rem;
      color: var(--dark-gray);
    }

    .step p {
      color: #666;
      max-width: 250px;
    }

    .heatmap {
      padding: 5rem 0;
      background-color: var(--gray);
    }

    .heatmap-container {
      position: relative;
      margin-top: 2rem;
      height: 400px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .map-controls {
      display: flex;
      gap: 1rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .map-control {
      background-color: var(--white);
      border: 2px solid var(--light-green);
      border-radius: 50px;
      padding: 0.5rem 1rem;
      cursor: pointer;
      transition: var(--transition);
      font-weight: 500;
    }

    .map-control:hover {
      background-color: var(--light-green);
      color: var(--white);
    }

    .map-control.active {
      background-color: var(--dark-green);
      border-color: var(--dark-green);
      color: var(--white);
    }

    .yield-prediction {
      padding: 5rem 0;
      background-color: var(--white);
    }

    .chart-container {
      margin-top: 2rem;
      height: 350px;
      position: relative;
      background-color: var(--gray);
      padding: 1rem;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .prediction-button-container {
      display: flex;
      justify-content: center;
      margin-top: 2rem;
    }

    .prediction-button {
      background-color: var(--dark-green);
      color: var(--white);
      padding: 0.8rem 1.5rem;
      border-radius: 50px;
      font-weight: 600;
      text-decoration: none;
      transition: var(--transition);
      border: none;
      cursor: pointer;
    }

    .prediction-button:hover {
      background-color: var(--light-green);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(46, 125, 50, 0.2);
    }

    .chatbot {
      padding: 5rem 0;
      background-color: var(--gray);
    }

    .chatbot-container {
      max-width: 600px;
      margin: 0 auto;
      background: var(--white);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .header {
      background: linear-gradient(135deg, #2E8B57 0%, #32CD32 50%, #228B22 100%);
      color: white;
      padding: 15px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      border-bottom: 2px solid #1c6b34;
    }

    .header h1 {
      font-size: 22px;
      font-weight: bold;
    }

    .header p {
      font-size: 13px;
      opacity: 0.9;
      margin-top: 3px;
    }

    .status {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      margin-top: 6px;
    }

    .status-dot {
      color: #90EE90;
      margin-right: 5px;
    }

    .chat-container {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .message {
      max-width: 75%;
      padding: 12px 15px;
      border-radius: 16px;
      position: relative;
      animation: fadeIn 0.25s ease;
      word-wrap: break-word;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(8px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .user-message {
      align-self: flex-end;
      background: linear-gradient(135deg, #E8F5E8 0%, #D4EDDA 100%);
      border-bottom-right-radius: 6px;
    }

    .bot-message {
      align-self: flex-start;
      background: linear-gradient(135deg, #F0F8FF 0%, #E6F3FF 100%);
      border-bottom-left-radius: 6px;
    }

    .message-header {
      display: flex;
      align-items: center;
      margin-bottom: 5px;
    }

    .avatar {
      font-size: 16px;
      margin-right: 6px;
    }

    .username {
      font-weight: bold;
      font-size: 13px;
    }

    .user-message .username {
      color: #2E8B57;
    }

    .bot-message .username {
      color: #4169E1;
    }

    .message-content {
      font-size: 14px;
      line-height: 1.5;
    }

    .timestamp {
      font-size: 11px;
      color: #666;
      text-align: right;
      margin-top: 4px;
    }

    .input-area {
      background: white;
      border-top: 1px solid #dee2e6;
      padding: 12px;
      display: flex;
      gap: 8px;
    }

    .chat-input {
      flex: 1;
      border: 2px solid #e9ecef;
      border-radius: 10px;
      padding: 10px 12px;
      font-size: 14px;
      resize: none;
      height: 55px;
      outline: none;
      transition: border-color 0.3s;
    }

    .chat-input:focus {
      border-color: #2E8B57;
    }

    .btn {
      border: none;
      border-radius: 10px;
      padding: 0 16px;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      height: 55px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .btn-send {
      background: linear-gradient(135deg, #2E8B57, #228B22);
      color: white;
    }

    .btn-send:hover {
      background: linear-gradient(135deg, #228B22, #1c6b34);
    }

    .btn-clear {
      background: #6c757d;
      color: white;
    }

    .btn-clear:hover {
      background: #5a6268;
    }

    .btn:disabled {
      background: #ced4da;
      color: #6c757d;
      cursor: not-allowed;
    }

    .typing-indicator {
      align-self: flex-start;
      color: #6c757d;
      font-style: italic;
      padding: 8px 12px;
      animation: pulse 1.4s infinite;
    }

    @keyframes pulse {
      0% {
        opacity: 0.6;
      }
      50% {
        opacity: 1;
      }
      100% {
        opacity: 0.6;
      }
    }

    .welcome-container {
      text-align: center;
      padding: 15px;
      margin: 10px 0;
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .welcome-icon {
      font-size: 34px;
      margin-bottom: 10px;
    }

    .welcome-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 8px;
      color: #2E8B57;
    }

    .welcome-text {
      font-size: 14px;
      line-height: 1.5;
      text-align: left;
    }

    ::-webkit-scrollbar {
      width: 7px;
    }

    ::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #a8a8a8;
    }

    @media (max-width: 768px) {
      .message {
        max-width: 85%;
      }
      .input-area {
        flex-direction: column;
      }
      .btn {
        width: 100%;
        margin-top: 8px;
      }
      .chat-input {
        height: 70px;
      }
    }

    @media (min-width: 768px) {
      .nav-links {
        display: flex;
        align-items: center;
      }

      .mobile-menu-btn {
        display: none;
      }

      .hero h1 {
        font-size: 3rem;
      }

      .hero-buttons {
        flex-direction: row;
        justify-content: center;
      }

      .solution-cards {
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      }

      .steps {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 2rem;
      }

      .step {
        margin-bottom: 0;
      }

      .about-content {
        grid-template-columns: 1fr 1fr;
      }

      .footer-content {
        grid-template-columns: 1fr 1fr 1fr;
        align-items: center;
      }

      .footer-social {
        justify-content: center;
      }

      .footer-tagline {
        text-align: right;
      }
    }

    @media (min-width: 992px) {
      .steps {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    .ai-floating-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 12px 20px;
      background: linear-gradient(135deg, #2E7D32, #228B22);
      border: none;
      border-radius: 25px;
      color: white;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      z-index: 1000;
      transition: transform 0.3s ease, background 0.3s ease;
    }
    .ai-floating-button:hover {
      transform: translateY(-3px);
      background: linear-gradient(135deg, #228B22, #1c6b34);
    }
    .ai-floating-button:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.3);
    }
    .ai-floating-button i {
      font-size: 18px;
    }
    .ai-assistant-popup {
      display: none;
      position: fixed;
      bottom: 90px;
      right: 20px;
      width: 350px;
      max-height: 500px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      z-index: 1001;
      flex-direction: column;
      overflow: hidden;
    }
    .ai-assistant-popup.active {
      display: flex;
    }
    @media (max-width: 768px) {
      .ai-assistant-popup { width: 90%; right: 5%; }
    }
  </style>
</head>
<body>
  <header>
    <div class="container nav-container">
      <div class="logo">
        <i class="fas fa-seedling"></i>
        <span>Farm IQ üåæ</span>
      </div>
      <nav class="nav-links">
        <a href="#home">Home</a>
        <a href="#solutions">Solutions</a>
        <a href="#yield-prediction">Yield Prediction</a>
        <a href="#heatmap">Heatmaps</a>
        <a href="#chatbot">Chatbot</a>
        <a href="#about">About Us</a>
        <a href="#contact">Contact</a>
        <a href="#home" class="cta-button">Try Farm IQ</a>
      </nav>
     
    </div>
  </header>

  <section class="hero" id="home">
    <div class="hero-content">
      <h1>AI Driven Pest & Disease Detection with Yield Prediction</h1>
      <p>Helping farmers detect crop diseases, predict yields, and get advisory support in real time.</p>
      <div class="hero-buttons">
        <button class="upload-btn" onclick="window.location.href='test.html'">
          <i class="fas fa-upload"></i> Inspect a Leaf
        </button>
        <button class="chat-btn" id="scrollToChatbot">
          <i class="fas fa-comment"></i> Chat with Agronomist
        </button>
      </div>
    </div>
  </section>

  <section class="solutions" id="solutions">
    <div class="container">
      <div class="section-title">
        <h2>Our Solutions</h2>
        <p>Advanced AI-powered tools to help farmers improve their crop management</p>
      </div>
      <div class="solution-cards">
        <div class="solution-card" data-href="vision-farm.html">
          <div class="solution-card-content">
            <div class="solution-icon"><i class="fas fa-eye"></i></div>
            <h3>Agrivision 1 Vision Model</h3>
            <p>Our advanced computer vision model identifies pests and diseases with over 95% accuracy from a single image of your crop.</p>
          </div>
        </div>
        <div class="solution-cards">
          
          <div class="solution-card-content">
            <div class="solution-icon"><i class="fas fa-chart-line"></i></div>
            <h3>AgriYield LM Crop Yield Prediction Model</h3>
            <p>Accurately forecast crop yields using historical data, weather patterns, and current field conditions with our predictive analytics engine.</p>
          </div>
        </div>
        <div class="solution-cards">
          <div class="solution-card" data-href="https://farmiq-inference-llm-188537869959.us-west1.run.app">
          <div class="solution-card-content">
            <div class="solution-icon"><i class="fas fa-robot"></i></div>
            <h3>AgriSage Inference LLM</h3>
            <p>Our intelligent advisory chatbot provides expert recommendations and answers your farming questions in your preferred language.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="how-it-works" id="how-it-works">
    <div class="container">
      <div class="section-title">
        <h2>How It Works</h2>
        <p>Our intuitive 4-step process makes farm management simple and effective</p>
      </div>
      <div class="steps">
        <div class="step">
          <div class="step-number">1</div>
          <div class="step-icon"><i class="fas fa-camera"></i></div>
          <h3>Crop Image Capturing</h3ur crop using any smartphone camera or upload existing images.</p>
        </div>
        <div class="step">
          <div class="step-number">2</div>
          <div class="step-icon"><i class="fas fa-microchip"></i></div>
          <h3>Advanced AI Algorithms</h3>
          <p>Our AI models process the data instantly to identify issues and analyze crop health.</p>
        </div>
        <div class="step">
          <div class="step-number">3</div>
          <div class="step-icon"><i class="fas fa-database"></i></div>
          <h3>Big Data Analytics</h3>
          <p>We combine historical, environmental and field data to generate accurate yield predictions.</p>
        </div>
        <div class="step">
          <div class="step-number">4</div>
          <div class="step-icon"><i class="fas fa-check-circle"></i></div>
          <h3>Problem Resolution</h3>
          <p>Receive personalized treatment recommendations and advice through our intelligent chatbot.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="heatmap" id="heatmap">
    <div class="container">
      <div class="section-title">
        <h2>Interactive Farm Heatmaps</h2>
        <p>Visualize key farm metrics to identify problem areas and optimize resource allocation</p>
      </div>
      <div class="map-controls">
        <button class="map-control active" data-layer="moisture">Soil Moisture</button>
        <button class="map-control" data-layer="pest">Pest Spread</button>
        <button class="map-control" data-layer="disease">Disease Zones</button>
      </div>
      <div class="heatmap-container">
        <div id="map" style="height: 100%; width: 100%;"></div>
      </div>
    </div>
  </section>

  <section class="yield-prediction" id="yield-prediction">
    <div class="container">
      <div class="solution-card" data-href="prediction.html">
      <div class="section-title">
        <h2>Yield Prediction</h2>
        <p>Plan your harvest and optimize your resources with accurate crop yield forecasting</p>
      </div>
      <div class="chart-container">
        <canvas id="yieldChart"></canvas>
      </div>
      <div class="prediction-button-container">
        <div class="solution-card" data-href="prediction.html">
        <button class="prediction-button" id="generatePrediction">Generate My Prediction</button>
      </div>
    </div>
  </section>

  <section class="chatbot" id="chatbot">
    <div class="container">
      <div class="section-title">
        <h2>Agronomist Chatbot</h2>
        <p>Get expert farming advice and recommendations from our AI-powered virtual agronomist</p>
      </div>
      <div class="chatbot-container">
        <div class="header">
          <h1>üå± FarmIQ AI Assistant</h1>
          <p>Your intelligent farming companion</p>
          <div class="status"><span class="status-dot">‚óè</span><span>Online - Ready to help</span></div>
        </div>
        <div class="chat-container" id="chatContainer">
          <div class="welcome-container">
            <div class="welcome-icon">ü§ñ</div>
            <div class="welcome-title">Hello! I'm FarmIQ AI</div>
            <div class="welcome-text">
              I'm your intelligent farming assistant. I can help you with:
              <br><br>
              üåæ Crop management advice<br>
              üå§Ô∏è Weather-related farming decisions<br>
              üíß Irrigation planning<br>
              üêõ Pest control solutions<br>
              üìä Market insights<br>
              üî¨ Agricultural best practices<br><br>
              What would you like to know about farming today?
            </div>
          </div>
        </div>
        <div class="input-area">
          <textarea class="chat-input" id="chatInput" placeholder="Ask me anything about farming..."></textarea>
          <button class="btn btn-send" id="sendBtn">Send</button>
          <button class="btn btn-clear" id="clearBtn">Clear</button>
        </div>
      </div>
    </div>
  </section>

  <section class="about" id="about">
    <div class="container">
      <div class="section-title">
        <h2>About Us / Our Mission</h2>
        <p>Building technology for sustainable farming and food security</p>
      </div>
  
      <div class="about-content">
        <div class="about-text">
          <p>Farm IQ was founded with a clear vision: to democratize access to advanced agricultural technology for farmers of all sizes. We believe that by combining artificial intelligence with agricultural expertise, we can help solve some of the most pressing challenges facing global food production today.</p>
          <p>Our team consists of agricultural experts, data scientists, and software engineers who are passionate about sustainable farming and using technology to improve crop yields while minimizing environmental impact.</p>
          <p>We're committed to supporting farmers in their transition to more efficient, data-driven and climate-resilient farming practices through accessible and affordable technology solutions.</p>
        </div>
  
        <div class="about-icons">
          <div class="about-icon"><i class="fas fa-cloud-sun"></i><p>Climate Resilience</p></div>
          <div class="about-icon"><i class="fas fa-leaf"></i><p>Sustainability</p></div>
          <div class="about-icon"><i class="fas fa-tractor"></i><p>Productivity</p></div>
        </div>
      </div>
  
      <!-- üåü Developers Section -->
      <div class="developers">
        <h3>Meet the Minds Behind Farm IQ</h3>
        <div class="developer-grid">
          <!-- Developer 1 -->
          <div class="developer-tile">
            <div class="developer-photo">
              <img src="dev2.jpeg" alt="Denis Kipchumba">
            </div>
            <div class="developer-info">
              <h4>Denis Kipchumba</h4>
              <p class="role">AI Engineer & Co-Founder</p>
              <p class="bio">Leads innovation in smart agriculture solutions, integrating AI with real-time data for climate-smart farming.</p>
            </div>
          </div>
  
          <!-- Developer 2 -->
          <div class="developer-tile">
            <div class="developer-photo">
              <img src="dev1.jpeg" alt="Larry Adhola">
            </div>
            <div class="developer-info">
              <h4>Larry Adhola</h4>
              <p class="role">Electrical Engineer & Co-Founder</p>
              <p class="bio">Passionate about building scalable and user-friendly systems that empower farmers with data-driven insights.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Section</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
  
      body {
        font-family: 'Segoe UI', Arial, sans-serif;
        background: linear-gradient(135deg, #e6f3ea 0%, #f0f7f4 100%);
        min-height: 100vh;
        color: #333;
        line-height: 1.6;
      }
  
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }
  
      /* Contact Section */
      .contact {
        padding: 80px 0;
        background: linear-gradient(to bottom, #ffffff, #f8faf8);
      }
  
      .section-title {
        text-align: center;
        margin-bottom: 50px;
      }
  
      .section-title h2 {
        font-size: 36px;
        color: #2d6a4f;
        margin-bottom: 15px;
        position: relative;
        display: inline-block;
      }
  
      .section-title h2::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 4px;
        background: #40916c;
        border-radius: 2px;
      }
  
      .section-title p {
        font-size: 18px;
        color: #6c757d;
        max-width: 600px;
        margin: 0 auto;
      }
  
      .contact-form {
        max-width: 700px;
        margin: 0 auto;
        background: white;
        padding: 40px;
        border-radius: 16px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      }
  
      .contact-form input,
      .contact-form textarea {
        width: 100%;
        padding: 16px;
        margin-bottom: 20px;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        font-size: 16px;
        transition: all 0.3s;
        background: #f8faf8;
      }
  
      .contact-form input:focus,
      .contact-form textarea:focus {
        outline: none;
        border-color: #40916c;
        box-shadow: 0 0 0 3px rgba(64, 145, 108, 0.1);
      }
  
      .contact-form button {
        width: 100%;
        padding: 16px;
        background: #2d6a4f;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.3s;
        margin-top: 10px;
      }
  
      .contact-form button:hover {
        background: #1b4332;
      }
  
      /* Footer */
      footer {
        background: #2d6a4f;
        color: white;
        padding: 50px 0 20px;
      }
  
      .footer-content {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
      }
  
      .footer-links {
        display: flex;
        gap: 30px;
        margin-bottom: 20px;
      }
  
      .footer-links a {
        color: white;
        text-decoration: none;
        font-size: 16px;
        transition: color 0.3s;
      }
  
      .footer-links a:hover {
        color: #95d5b2;
      }
  
      .footer-social {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
      }
  
      .footer-social a {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        color: white;
        text-decoration: none;
        transition: all 0.3s;
      }
  
      .footer-social a:hover {
        background: #40916c;
        transform: translateY(-3px);
      }
  
      .footer-tagline {
        font-size: 18px;
        font-weight: 500;
        text-align: center;
        width: 100%;
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
      }
  
      .copyright {
        text-align: center;
        padding-top: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        font-size: 14px;
        color: rgba(255, 255, 255, 0.7);
      }
  
      /* Responsive Design */
      @media (max-width: 768px) {
        .contact {
          padding: 60px 0;
        }
  
        .section-title h2 {
          font-size: 28px;
        }
  
        .contact-form {
          padding: 30px 20px;
        }
  
        .footer-content {
          flex-direction: column;
          text-align: center;
        }
  
        .footer-links {
          flex-direction: column;
          gap: 15px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Contact Section -->
    <section class="contact" id="contact">
      <div class="container">
        <div class="section-title">
          <h2>Contact Us</h2>
          <p>Get in touch for more information or support</p>
        </div>
        <form class="contact-form">
          <input type="text" placeholder="Your Name" required />
          <input type="email" placeholder="Your Email" required />
          <textarea placeholder="Your Message" rows="5" required></textarea>
          <button type="submit">Send Message</button>
        </form>
      </div>
    </section>
  
    <!-- Footer -->
    <footer>
      <div class="container footer-content">
        <div class="footer-links">
          <a href="#about">About</a>
          <a href="#solutions">Solutions</a>
          <a href="#contact">Contact</a>
          <a href="javascript:void(0)">Privacy Policy</a>
        </div>
        <div class="footer-social">
          <a href="javascript:void(0)"><i class="fab fa-twitter"></i></a>
          <a href="https://wa.me/254719736872" target="_blank"><i class="fab fa-whatsapp"></i>
          <a href="javascript:void(0)"><i class="fab fa-linkedin"></i></a>
        </div>
        <div class="footer-tagline">
          Farm IQ ‚Äì Smart Farming for a Sustainable Future üå±
        </div>
      </div>
      <div class="copyright">&copy; 2025 Farm IQ. All rights reserved.</div>
    </footer>
  
    <script>
      // Form submission
      document.querySelector('.contact-form').addEventListener('submit', (e) => {
        e.preventDefault();
        alert('Thank you for your message! We will get back to you soon.');
        e.target.reset();
      });
    </script>
  </body>
  </html>
  <button class="ai-floating-button" id="aiButton" title="Talk to FarmIQ AI">
    <i class="fas fa-robot"></i> Talk to FarmIQ AI
  </button>
  <div class="ai-assistant-popup" id="aiPopup">
    <div class="header">
      <h1>üå± FarmIQ AI Assistant</h1>
      <p>Your intelligent farming companion</p>
      <div class="status"><span class="status-dot">‚óè</span><span>Online - Ready to help</span></div>
    </div>
    <div class="chat-container" id="aiChatContainer">
      <div class="welcome-container">
        <div class="welcome-icon">ü§ñ</div>
        <div class="welcome-title">Hello! I'm FarmIQ AI</div>
        <div class="welcome-text">
          I'm your intelligent farming assistant. I can help you with:
          <br><br>
          üåæ Crop management advice<br>
          üå§Ô∏è Weather-related farming decisions<br>
          üíß Irrigation planning<br>
          üêõ Pest control solutions<br>
          üìä Market insights<br>
          üî¨ Agricultural best practices<br><br>
          What would you like to know about farming today?
        </div>
      </div>
    </div>
    <div class="input-area">
      <textarea class="chat-input" id="aiChatInput" placeholder="Ask me anything about farming..."></textarea>
      <button class="btn btn-send" id="aiSendBtn">Send</button>
      <button class="btn btn-clear" id="aiClearBtn">Clear</button>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      initApp();
    });

    function initApp() {
      // Ensure page starts at the top (Home section)
      window.scrollTo({ top: 0, behavior: 'smooth' });

      // Initialize Leaflet map
      const map = L.map('map').setView([0, 0], 13); // Default view, will be updated with user location
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(map);

      // Mobile Menu Toggle
      const mobileMenuBtn = document.querySelector(".mobile-menu-btn");
      const mobileMenu = document.querySelector(".mobile-menu");
      if (mobileMenuBtn && mobileMenu) {
        mobileMenuBtn.addEventListener("click", () => {
          mobileMenu.classList.toggle("active");
        });
      } else {
        console.warn("Mobile menu button or menu not found.");
      }

      // Smooth scrolling for navigation links
      const navLinks = document.querySelectorAll(".nav-links a, .mobile-menu a");
      navLinks.forEach(link => {
        link.addEventListener("click", (e) => {
          e.preventDefault();
          const targetId = link.getAttribute("href");
          const targetElement = document.querySelector(targetId);
          if (targetElement) {
            targetElement.scrollIntoView({ behavior: "smooth" });
            if (mobileMenu && mobileMenu.classList.contains("active")) {
              mobileMenu.classList.remove("active");
            }
          }
        });
      });

      // Solution card click handler
      const cards = document.querySelectorAll(".solution-card");
      cards.forEach(card => {
        card.addEventListener("click", () => {
          const href = card.getAttribute("data-href");
          if (href) {
            window.location.href = href;
          }
        });
      });

      // Upload Modal
      const uploadModal = document.getElementById("uploadModal");
      const closeModalBtn = document.getElementById("closeModal");
      const uploadArea = document.getElementById("uploadArea");
      const fileInput = document.getElementById("fileInput");
      const browseFiles = document.getElementById("browseFiles");
      const fileName = document.getElementById("fileName");
      const submitUpload = document.getElementById("submitUpload");

      if (closeModalBtn) {
        closeModalBtn.addEventListener("click", () => {
          uploadModal.classList.remove("active");
        });
      }

      window.addEventListener("click", (e) => {
        if (e.target === uploadModal) {
          uploadModal.classList.remove("active");
        }
      });

      if (browseFiles) {
        browseFiles.addEventListener("click", () => {
          fileInput.click();
        });
      }

      if (fileInput) {
        fileInput.addEventListener("change", () => {
          if (fileInput.files.length > 0) {
            fileName.textContent = fileInput.files[0].name;
          }
        });
      }

      if (uploadArea) {
        uploadArea.addEventListener("dragover", (e) => {
          e.preventDefault();
          uploadArea.style.backgroundColor = "#f0f0f0";
        });

        uploadArea.addEventListener("dragleave", () => {
          uploadArea.style.backgroundColor = "";
        });

        uploadArea.addEventListener("drop", (e) => {
          e.preventDefault();
          uploadArea.style.backgroundColor = "";
          if (e.dataTransfer.files.length > 0) {
            fileInput.files = e.dataTransfer.files;
            fileName.textContent = e.dataTransfer.files[0].name;
          }
        });
      }

      if (submitUpload) {
        submitUpload.addEventListener("click", async () => {
          if (!fileInput.files.length) {
            alert("Please select an image first.");
            return;
          }

          const file = fileInput.files[0];
          const storage = window.firebaseStorage;
          const database = window.firebaseDatabase;

          submitUpload.innerHTML = '<div class="spinner"></div>';
          submitUpload.disabled = true;

          try {
            const fileRef = window.storageRef(storage, `crop-images/${Date.now()}_${file.name}`);
            const snapshot = await window.uploadBytes(fileRef, file);
            const downloadURL = await window.getDownloadURL(snapshot.ref);

            const imageData = {
              filename: file.name,
              url: downloadURL,
              uploadedAt: new Date().toISOString(),
              status: "pending_analysis",
            };

            const imagesRef = window.ref(database, "crop-images");
            const newImageRef = window.push(imagesRef);
            await window.set(newImageRef, imageData);

            alert("Image uploaded successfully! Analysis will begin shortly.");
            uploadModal.classList.remove("active");

            fileInput.value = "";
            fileName.textContent = "";
          } catch (error) {
            console.error("Error uploading image:", error);
            alert("Error uploading image. Please try again.");
          } finally {
            submitUpload.innerHTML = "Upload and Analyze";
            submitUpload.disabled = false;
          }
        });
      }

      // Scroll to Chatbot and focus input
      const scrollToChatbot = document.getElementById("scrollToChatbot");
      if (scrollToChatbot) {
        scrollToChatbot.addEventListener("click", () => {
          const chatbotSection = document.getElementById("chatbot");
          if (chatbotSection) {
            chatbotSection.scrollIntoView({ behavior: "smooth" });
            setTimeout(() => {
              const chatInput = document.getElementById("chatInput");
              if (chatInput) chatInput.focus();
            }, 1000);
          }
        });
      } else {
        console.warn("Element with ID 'scrollToChatbot' not found in the DOM.");
      }

      // Heatmap Functionality
      let moistureLayer, pestLayer, diseaseLayer;

      function generateSampleData(lat, lon) {
        // Generate sample data points around the user's location
        return {
          moisture: [
            [lat, lon, 0.8],
            [lat + 0.002, lon + 0.002, 0.6],
            [lat - 0.002, lon - 0.002, 0.9],
            [lat + 0.001, lon - 0.001, 0.7],
            [lat - 0.001, lon + 0.001, 0.85],
          ],
          pest: [
            [lat, lon, 0.4],
            [lat + 0.002, lon + 0.002, 0.7],
            [lat - 0.002, lon - 0.002, 0.5],
            [lat + 0.001, lon - 0.001, 0.6],
            [lat - 0.001, lon + 0.001, 0.3],
          ],
          disease: [
            [lat, lon, 0.9],
            [lat + 0.002, lon + 0.002, 0.3],
            [lat - 0.002, lon - 0.002, 0.6],
            [lat + 0.001, lon - 0.001, 0.8],
            [lat - 0.001, lon + 0.001, 0.4],
          ]
        };
      }

      function initializeHeatmap(position) {
        const lat = position.coords.latitude;
        const lon = position.coords.longitude;
        const accuracy = position.coords.accuracy;

        // Center map on user's location
        map.setView([lat, lon], 16);

        // Generate sample data
        const data = generateSampleData(lat, lon);

        // Initialize heatmap layers
        moistureLayer = L.heatLayer(data.moisture, { radius: 25, blur: 15 });
        pestLayer = L.heatLayer(data.pest, { radius: 25, blur: 15 });
        diseaseLayer = L.heatLayer(data.disease, { radius: 25, blur: 15 });

        // Add default layer (moisture)
        map.addLayer(moistureLayer);

        // Add marker for user location
        L.marker([lat, lon]).addTo(map)
          .bindPopup(`üìç You are here<br>Accuracy: ¬±${accuracy.toFixed(1)}m`)
          .openPopup();

        // Map control buttons
        const mapControls = document.querySelectorAll(".map-control");
        mapControls.forEach(button => {
          button.addEventListener("click", () => {
            mapControls.forEach(btn => btn.classList.remove("active"));
            button.classList.add("active");

            // Remove all layers
            if (moistureLayer) map.removeLayer(moistureLayer);
            if (pestLayer) map.removeLayer(pestLayer);
            if (diseaseLayer) map.removeLayer(diseaseLayer);

            // Add selected layer
            const layer = button.dataset.layer;
            if (layer === "moisture") {
              map.addLayer(moistureLayer);
            } else if (layer === "pest") {
              map.addLayer(pestLayer);
            } else if (layer === "disease") {
              map.addLayer(diseaseLayer);
            }
          });
        });
      }

      function handleGeolocationError(error) {
        console.warn("Geolocation error:", error.message);
        // Fallback to a default location (e.g., a generic farm location)
        const defaultLat = 51.505;
        const defaultLon = -0.09;
        map.setView([defaultLat, defaultLon], 13);
        const data = generateSampleData(defaultLat, defaultLon);

        // Initialize heatmap layers with default data
        moistureLayer = L.heatLayer(data.moisture, { radius: 25, blur: 15 });
        pestLayer = L.heatLayer(data.pest, { radius: 25, blur: 15 });
        diseaseLayer = L.heatLayer(data.disease, { radius: 25, blur: 15 });
        map.addLayer(moistureLayer);

        // Add marker for default location
        L.marker([defaultLat, defaultLon]).addTo(map)
          .bindPopup("üìç Default Location (Geolocation unavailable)")
          .openPopup();

        // Map control buttons
        const mapControls = document.querySelectorAll(".map-control");
        mapControls.forEach(button => {
          button.addEventListener("click", () => {
            mapControls.forEach(btn => btn.classList.remove("active"));
            button.classList.add("active");

            if (moistureLayer) map.removeLayer(moistureLayer);
            if (pestLayer) map.removeLayer(pestLayer);
            if (diseaseLayer) map.removeLayer(diseaseLayer);

            const layer = button.dataset.layer;
            if (layer === "moisture") {
              map.addLayer(moistureLayer);
            } else if (layer === "pest") {
              map.addLayer(pestLayer);
            } else if (layer === "disease") {
              map.addLayer(diseaseLayer);
            }
          });
        });

        alert("Unable to access your location. Using a default location for the heatmap.");
      }

      // Request user's geolocation
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(initializeHeatmap, handleGeolocationError, {
          enableHighAccuracy: true,
          timeout: 5000,
          maximumAge: 0
        });
      } else {
        handleGeolocationError({ message: "Geolocation is not supported by this browser." });
      }

      // Yield Prediction Chart (Placeholder)
      const ctx = document.getElementById('yieldChart').getContext('2d');
      const yieldChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
          datasets: [{
            label: 'Predicted Yield (Tons)',
            data: [5, 7, 8, 6, 9, 10],
            backgroundColor: 'rgba(46, 125, 50, 0.6)',
            borderColor: 'rgba(46, 125, 50, 1)',
            borderWidth: 1
          }]
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Yield (Tons)'
              }
            }
          }
        }
      });

      document.getElementById('generatePrediction').addEventListener('click', () => {
        alert('Generating yield prediction... (Demo)');
      });

      // Main Chatbot initialization
      const chatContainer = document.getElementById("chatContainer");
      const chatInput = document.getElementById("chatInput");
      const sendBtn = document.getElementById("sendBtn");
      const clearBtn = document.getElementById("clearBtn");

      sendBtn.addEventListener("click", sendMessage);
      clearBtn.addEventListener("click", clearChat);
      chatInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && !e.shiftKey) {
          e.preventDefault();
          sendMessage();
        }
      });

      async function sendMessage() {
        const userMsg = chatInput.value.trim();
        if (!userMsg) return;
        sendBtn.disabled = true;
        sendBtn.textContent = "...";
        addMessage(userMsg, true);
        chatInput.value = "";
        showTypingIndicator();
        try {
          const response = await callGroqAPI(userMsg);
          removeTypingIndicator();
          addMessage(response, false);
        } catch (err) {
          removeTypingIndicator();
          addMessage(`‚ö†Ô∏è Error: ${err.message}`, false);
        } finally {
          sendBtn.disabled = false;
          sendBtn.textContent = "Send";
        }
      }

      async function callGroqAPI(prompt) {
        const response = await fetch("https://api.groq.com/openai/v1/chat/completions", {
          method: "POST",
          headers: {
            Authorization: `Bearer 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`,
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            messages: [
              { role: "system", content: "You are FarmIQ AI, a farming assistant." },
              { role: "user", content: prompt },
            ],
            model: "llama-3.1-8b-instant",
            temperature: 0.7,
            max_tokens: 512,
          }),
        });
        if (!response.ok) throw new Error(`API error: ${response.status}`);
        const data = await response.json();
        return data.choices[0].message.content;
      }

      function addMessage(content, isUser) {
        const msg = document.createElement("div");
        msg.className = `message ${isUser ? "user-message" : "bot-message"}`;
        const time = new Date().toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" });
        msg.innerHTML = `
          <div class="message-header">
            <span class="avatar">${isUser ? "üë®‚Äçüåæ" : "ü§ñ"}</span>
            <span class="username">${isUser ? "Farmer" : "FarmIQ AI"}</span>
          </div>
          <div class="message-content">${content.replace(/\n/g, "<br>")}</div>
          <div class="timestamp">${time}</div>`;
        chatContainer.appendChild(msg);
        scrollToBottom();
      }

      function showTypingIndicator() {
        const t = document.createElement("div");
        t.className = "typing-indicator";
        t.id = "typingIndicator";
        t.textContent = "FarmIQ AI is typing...";
        chatContainer.appendChild(t);
        scrollToBottom();
      }

      function removeTypingIndicator() {
        const t = document.getElementById("typingIndicator");
        if (t) t.remove();
      }

      function clearChat() {
        const welcome = document.querySelector(".welcome-container");
        chatContainer.innerHTML = "";
        if (welcome) chatContainer.appendChild(welcome);
        chatContainer.scrollTop = 0;
      }

      function scrollToBottom() {
        chatContainer.scrollTop = chatContainer.scrollHeight;
      }

      setTimeout(() => {
        const examples = [
          "Best crops for tropical climate?",
          "Prevent pests in tomatoes",
          "Optimal irrigation for corn",
          "How weather affects yield",
        ];
        const box = document.createElement("div");
        box.style.padding = "12px";
        box.style.textAlign = "center";
        box.innerHTML = `<p style="color:#666;margin-bottom:8px;">Try asking:</p>
          <div style="display:flex;flex-wrap:wrap;gap:6px;justify-content:center;">
          ${examples
            .map(
              (q) => `<button style="background:#e9ecef;border:none;border-radius:16px;padding:6px 12px;font-size:13px;cursor:pointer;" onclick="document.getElementById('chatInput').value='${q}';document.getElementById('chatInput').focus();">${q}</button>`
            )
            .join("")}</div>`;
        chatContainer.appendChild(box);
      }, 1000);

      // AI Floating Button and Popup
      const aiButton = document.getElementById('aiButton');
      const aiPopup = document.getElementById('aiPopup');
      const aiChatContainer = document.getElementById('aiChatContainer');
      const aiChatInput = document.getElementById('aiChatInput');
      const aiSendBtn = document.getElementById('aiSendBtn');
      const aiClearBtn = document.getElementById('aiClearBtn');

      aiButton.addEventListener('click', () => {
        aiPopup.classList.toggle('active');
        if (aiPopup.classList.contains('active')) {
          aiChatInput.focus();
        }
      });

      document.addEventListener('click', (e) => {
        if (!aiPopup.contains(e.target) && e.target !== aiButton) {
          aiPopup.classList.remove('active');
        }
      });

      aiSendBtn.addEventListener('click', aiSendMessage);
      aiClearBtn.addEventListener('click', aiClearChat);
      aiChatInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          aiSendMessage();
        }
      });

      async function aiSendMessage() {
        const userMsg = aiChatInput.value.trim();
        if (!userMsg) return;
        aiSendBtn.disabled = true;
        aiSendBtn.textContent = '...';
        aiAddMessage(userMsg, true);
        aiChatInput.value = '';
        aiShowTypingIndicator();
        try {
          const response = await callGroqAPI(userMsg);
          aiRemoveTypingIndicator();
          aiAddMessage(response, false);
        } catch (err) {
          aiRemoveTypingIndicator();
          aiAddMessage(`‚ö†Ô∏è Error: ${err.message}`, false);
        } finally {
          aiSendBtn.disabled = false;
          aiSendBtn.textContent = 'Send';
        }
      }

      function aiAddMessage(content, isUser) {
        const msg = document.createElement('div');
        msg.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
        const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        msg.innerHTML = `
          <div class="message-header">
            <span class="avatar">${isUser ? 'üë®‚Äçüåæ' : 'ü§ñ'}</span>
            <span class="username">${isUser ? 'Farmer' : 'FarmIQ AI'}</span>
          </div>
          <div class="message-content">${content.replace(/\n/g, '<br>')}</div>
          <div class="timestamp">${time}</div>`;
        aiChatContainer.appendChild(msg);
        aiScrollToBottom();
      }

      function aiShowTypingIndicator() {
        const t = document.createElement('div');
        t.className = 'typing-indicator';
        t.id = 'aiTypingIndicator';
        t.textContent = 'FarmIQ AI is typing...';
        aiChatContainer.appendChild(t);
        aiScrollToBottom();
      }

      function aiRemoveTypingIndicator() {
        const t = aiChatContainer.querySelector('#aiTypingIndicator');
        if (t) t.remove();
      }

      function aiClearChat() {
        const welcome = aiChatContainer.querySelector('.welcome-container');
        aiChatContainer.innerHTML = '';
        if (welcome) aiChatContainer.appendChild(welcome);
        aiChatContainer.scrollTop = 0;
      }

      function aiScrollToBottom() {
        aiChatContainer.scrollTop = aiChatContainer.scrollHeight;
      }

      setTimeout(() => {
        const examples = [
          'Best crops for tropical climate?',
          'Prevent pests in tomatoes',
          'Optimal irrigation for corn',
          'How weather affects yield',
        ];
        const box = document.createElement('div');
        box.style.padding = '12px';
        box.style.textAlign = 'center';
        box.innerHTML = `<p style="color:#666;margin-bottom:8px;">Try asking:</p>
          <div style="display:flex;flex-wrap:wrap;gap:6px;justify-content:center;">
          ${examples.map(q => `<button style="background:#e9ecef;border:none;border-radius:16px;padding:6px 12px;font-size:13px;cursor:pointer;" onclick="document.getElementById('aiChatInput').value='${q}';document.getElementById('aiChatInput').focus();">${q}</button>`).join('')}</div>`;
        aiChatContainer.appendChild(box);
      }, 1000);

     
      }
    
  </script>
</body>
</html>